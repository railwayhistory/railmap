# DE 1000.  Flensburg Weiche (ausschl) - Harrislee Grenze
#
let flwhag = path("path.de.1000");

with detail = 4 {
    track(:double :first :cat, flwhag[:flw.f, :fri - 1sw]);
    track(:first :cat, flwhag[:ffle, :fri - 1sw] >> 1.5dt); # de.1005 

    # Friedensweg
    track(:first, flwhag[:fri - 1sw, :fri + 1sw] << 0.5dt);
    track(:first,
           flwhag[:fri - 1sw, :fri - .2sw - 1dl] >> 0.5dt
        -- flwhag[:fri - .2sw, :fri - 0.1sw] >> 1.5dt
    );
    track(:first,
           flwhag[:fri - 1sw, :fri + .2sw + 2dl] >> 1.5dt
        -- flwhag[:fri + .2sw + 3dl, :fri + 1sw] >> 0.5dt
    );
    track(:station,
           flwhag[:fri + .1sw, :fri + .2sw] >> 1.5dt
        -- flwhag[:fri + .2sw + 2dl, :fri + .2sw + 3dl] << 0.5dt
    );
    marker(:de_abzw, flwhag[:fri] >> 1.5dt);
    station(
        flwhag[:fri] << 0.5dt, :left,
        "F. Friedensweg",
        "174,57 â€¢ 5,49"
    );


    track(:double :first :cat, flwhag[:fri + 1sw, :har - .6sw]);
    with layer = 1 line_badge(flwhag[:har - 3km], "1000");


    # Harrislee
    with layer = 0.5 track(:double :first, flwhag[:har - 0.6sw, :har.x + 4dl]);
    track(:station :removed,
           flwhag[:har - 0.51sw, :har - 0.5sw] << 0.5dt
        -- flwhag[:har - 0.5sw + 1dl, :har.x - 1dl] << 1.5dt
        -- flwhag[:har.x + 4dl, :har.f] >> 3.5dt
    );
    track(:station :removed,
           flwhag[:har.x + 3dl, :har.f] >> 2.5dt
    );
    marker(:de_bf :removed, flwhag[:har] >> 0.5dt);
    station(
        flwhag[:har] >> 1sw, :right,
        "Harrislee",
        "177,44"
    );


    track(:double :first :cat, flwhag[:har.x + 4dl, :f]);

    # Harrislee Grenze
    marker(:de_dirgr, flwhag[:hag] >> 0.5dt);
    marker(:statdt, flwhag[:hag] << 0.5dt);
    marker(:de_dirgr :left, flwhag[:hag] << 0.5dt);


#   contour bfab
#       flwhag[har - .51sw, har - .5sw] << 0.5dt --
#       flwhag[har - .5sw + 1dl, har.x - 1dl] << 1.5dt --
#       flwhag[har.x + 5dl, har.f] >> 3.5dt
#   ;
#   contour bfab
#       flwhag[har.x + 4dl, har.f] >> 2.5dt
#   ;
#       
#   symbol bfabr flwhag[har] >> 0.5dt;

#   label flwhag[har + .5sw] >> 2sw
#       hbox(align("ref"),
#           vbox(align("center"),
#           span(font(color=linegrey, size=8pt), "Harrislee"),
#           span(font(color=linegrey, size=6pt), "177,44*")
#           )
#       )
#   ;

#   contour elib2 flwhag[har.x + 2dl, f];

#   symbol mono_symbol("de_dirgr", black, 0) flwhag[hag] >> 0.5dt;
#   symbol mono_symbol("statdt", black, 0) flwhag[hag] << 0.5dt;
#   symbol mono_symbol("de_dirgr", black, 180) flwhag[hag] << 0.5dt;

#   label flwhag[hag - 1dt] >> 5dt
#       hbox(align("center"),
#           vbox(align("start"),
#               span(font(color=black, size=6pt), "DK 26: 110,6"),
#               span(font(color=black, size=6pt), "DE 1000: 179,83*")
#           )
#       )
#   ;
}
